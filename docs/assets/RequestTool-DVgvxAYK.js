import{j as o,r as l,X as P,F as B,C as D,T as M,S as O,a as F}from"./index-Bkan-bJV.js";const G="_requestToolContainer_ysbe5_1",H="_requestToolOverlay_ysbe5_10",A="_requestTool_ysbe5_1",k="_btnCross_ysbe5_28",f={requestToolContainer:G,requestToolOverlay:H,requestTool:A,btnCross:k},K="_fileUploadHolder_15a4g_1",L="_fileUploadInput_15a4g_5",V="_iconPreview_15a4g_10",x={fileUploadHolder:K,fileUploadInput:L,iconPreview:V};function $({icon:c,onChange:g}){return o.jsxs("div",{children:[o.jsx("label",{htmlFor:"icon",className:"custom-file-label",children:"Upload icon (PNG or SVG)"}),o.jsxs("div",{className:x.fileUploadHolder,children:[o.jsx("input",{type:"file",id:"icon",name:"icon",accept:"image/png, image/svg+xml",className:x.fileUploadInput,onChange:g}),c&&o.jsx("div",{className:x.iconPreview,children:o.jsx("img",{src:c,alt:"Preview",style:{width:"48px",height:"48px"}})})]})]})}function Q({onClose:c,isMobileMenuOpen:g}){const T={name:"",categories:[],description:"",icon:""},[v,u]=l.useState(""),[a,r]=l.useState(T),[b,y]=l.useState(!1),[j,C]=l.useState(!1),[i,d]=l.useState({name:!1,categories:!1,description:!1}),[p,m]=l.useState({name:!1,categories:!1,description:!1});l.useEffect(()=>(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",document.body.style.touchAction="none",()=>{g||(document.body.style.overflow="",document.documentElement.style.overflow="",document.body.style.touchAction="")}),[g]);const q=t=>{const e=t.target.value;r(n=>({...n,name:e})),i.name&&m(n=>({...n,name:e.trim()===""}))},_=t=>{if(t.key==="Enter"){t.preventDefault();const e=v.split(";").map(s=>s.trim()).filter(s=>s&&s.length<=20),n=[...a.categories,...e].slice(0,5);r(s=>({...s,categories:n})),u(""),i.categories&&m(s=>({...s,categories:n.length===0}))}},w=t=>{const e=t.target.value;if(e.includes(";")){const n=e.split(";").map(s=>s.trim()).filter(s=>s&&s.length<=20);if(n.length>0){const s=5-a.categories.length,h=n.slice(0,s),U=[...a.categories,...h].slice(0,5);r(E=>({...E,categories:U})),u("")}else u(e)}else u(e)},S=t=>{r(e=>({...e,categories:e.categories.filter((n,s)=>s!==t)}))},N=t=>{const e=t.target.value;e.length<=420&&(r(n=>({...n,description:e})),i.description&&m(n=>({...n,description:e.trim()===""})))},R=t=>{const e=t.target.files[0];if(!e)return;if(!["image/png","image/svg+xml"].includes(e.type)){alert("Only PNG and SVG files are allowed.");return}const s=new FileReader;s.onloadend=()=>{r(h=>({...h,icon:s.result}))},s.readAsDataURL(e)},I=t=>{t.preventDefault();const e={name:a.name.trim()==="",categories:a.categories.length===0,description:a.description.trim()===""};m(e),d({name:!0,categories:!0,description:!0}),!Object.values(e).some(Boolean)&&(y(!0),C(!1),setTimeout(()=>{y(!1),C(!0),r(T),u(""),d({name:!1,categories:!1,description:!1}),m({name:!1,categories:!1,description:!1})},1500))};return o.jsx("div",{className:f.requestToolContainer,children:o.jsx("div",{className:f.requestToolOverlay,children:o.jsxs("div",{className:f.requestTool,children:[o.jsx("button",{className:`btn ${f.btnCross}`,onClick:c,children:o.jsx(P,{size:20})}),o.jsxs("form",{onSubmit:I,className:"form",children:[o.jsx("h1",{children:"Request tool"}),o.jsx(B,{labelName:"Tool name",type:"text",name:"toolname",value:a.name,onChange:q,error:p.name,touched:i.name,onBlur:()=>d(t=>({...t,name:!0}))}),o.jsx(D,{tagsInput:v,onChange:w,onKeyDown:_,categories:a.categories,onRemove:S,error:p.categories,touched:i.categories,onBlur:()=>d(t=>({...t,categories:!0}))}),o.jsx(M,{value:a.description,onChange:N,maxLength:420,error:p.description,touched:i.description,onBlur:()=>d(t=>({...t,description:!0})),hasCounter:!0}),o.jsx($,{icon:a.icon,onChange:R}),o.jsx(O,{onCancel:c,loading:b,hasCancelBtn:!0})]}),j&&o.jsx(F,{successMessage:"âœ… Tool request sent successfully!"})]})})})}export{Q as default};
//# sourceMappingURL=RequestTool-DVgvxAYK.js.map
