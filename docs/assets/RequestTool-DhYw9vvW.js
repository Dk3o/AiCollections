import{j as o,r as l,X as P,I as B,C as D,T as M,S as O}from"./index-CGMGBohj.js";const G="_requestToolContainer_ysbe5_1",H="_requestToolOverlay_ysbe5_10",A="_requestTool_ysbe5_1",k="_btnCross_ysbe5_28",g={requestToolContainer:G,requestToolOverlay:H,requestTool:A,btnCross:k},F="_fileUploadHolder_15a4g_1",K="_fileUploadInput_15a4g_5",L="_iconPreview_15a4g_10",x={fileUploadHolder:F,fileUploadInput:K,iconPreview:L};function V({icon:c,onChange:f}){return o.jsxs("div",{children:[o.jsx("label",{htmlFor:"icon",className:"custom-file-label",children:"Upload icon (PNG or SVG)"}),o.jsxs("div",{className:x.fileUploadHolder,children:[o.jsx("input",{type:"file",id:"icon",name:"icon",accept:"image/png, image/svg+xml",className:x.fileUploadInput,onChange:f}),c&&o.jsx("div",{className:x.iconPreview,children:o.jsx("img",{src:c,alt:"Preview",style:{width:"48px",height:"48px"}})})]})]})}function $(){return o.jsx("div",{className:"success-message",children:"âœ… Tool request sent successfully!"})}function Q({onClose:c,isMobileMenuOpen:f}){const v={name:"",categories:[],description:"",icon:""},[T,u]=l.useState(""),[a,r]=l.useState(v),[b,y]=l.useState(!1),[j,C]=l.useState(!1),[i,d]=l.useState({name:!1,categories:!1,description:!1}),[p,m]=l.useState({name:!1,categories:!1,description:!1});l.useEffect(()=>(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",document.body.style.touchAction="none",()=>{f||(document.body.style.overflow="",document.documentElement.style.overflow="",document.body.style.touchAction="")}),[f]);const q=t=>{const e=t.target.value;r(n=>({...n,name:e})),i.name&&m(n=>({...n,name:e.trim()===""}))},_=t=>{if(t.key==="Enter"){t.preventDefault();const e=T.split(";").map(s=>s.trim()).filter(s=>s&&s.length<=20),n=[...a.categories,...e].slice(0,5);r(s=>({...s,categories:n})),u(""),i.categories&&m(s=>({...s,categories:n.length===0}))}},w=t=>{const e=t.target.value;if(e.includes(";")){const n=e.split(";").map(s=>s.trim()).filter(s=>s&&s.length<=20);if(n.length>0){const s=5-a.categories.length,h=n.slice(0,s),U=[...a.categories,...h].slice(0,5);r(E=>({...E,categories:U})),u("")}else u(e)}else u(e)},S=t=>{r(e=>({...e,categories:e.categories.filter((n,s)=>s!==t)}))},N=t=>{const e=t.target.value;e.length<=420&&(r(n=>({...n,description:e})),i.description&&m(n=>({...n,description:e.trim()===""})))},I=t=>{const e=t.target.files[0];if(!e)return;if(!["image/png","image/svg+xml"].includes(e.type)){alert("Only PNG and SVG files are allowed.");return}const s=new FileReader;s.onloadend=()=>{r(h=>({...h,icon:s.result}))},s.readAsDataURL(e)},R=t=>{t.preventDefault();const e={name:a.name.trim()==="",categories:a.categories.length===0,description:a.description.trim()===""};m(e),d({name:!0,categories:!0,description:!0}),!Object.values(e).some(Boolean)&&(y(!0),C(!1),setTimeout(()=>{y(!1),C(!0),r(v),u(""),d({name:!1,categories:!1,description:!1}),m({name:!1,categories:!1,description:!1})},1500))};return o.jsx("div",{className:g.requestToolContainer,children:o.jsx("div",{className:g.requestToolOverlay,children:o.jsxs("div",{className:g.requestTool,children:[o.jsx("button",{className:`btn ${g.btnCross}`,onClick:c,children:o.jsx(P,{size:20})}),o.jsxs("form",{onSubmit:R,className:g.form,children:[o.jsx("h1",{children:"Request tool"}),o.jsx(B,{labelName:"Tool name",type:"text",name:"toolname",value:a.name,onChange:q,error:p.name,touched:i.name,onBlur:()=>d(t=>({...t,name:!0}))}),o.jsx(D,{tagsInput:T,onChange:w,onKeyDown:_,categories:a.categories,onRemove:S,error:p.categories,touched:i.categories,onBlur:()=>d(t=>({...t,categories:!0}))}),o.jsx(M,{value:a.description,onChange:N,maxLength:420,error:p.description,touched:i.description,onBlur:()=>d(t=>({...t,description:!0})),hasCounter:!0}),o.jsx(V,{icon:a.icon,onChange:I}),o.jsx(O,{onCancel:c,loader:b,hasCancelBtn:!0})]}),j&&o.jsx($,{})]})})})}export{Q as default};
//# sourceMappingURL=RequestTool-DhYw9vvW.js.map
