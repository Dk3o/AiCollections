import{j as s,r,X as D,T as E,C as P,D as B,S as M}from"./index-BtGMtlHE.js";const O="_requestToolContainer_1sxww_1",G="_requestToolOverlay_1sxww_10",H="_requestTool_1sxww_1",V="_form_1sxww_31",A="_btnCross_1sxww_42",m={requestToolContainer:O,requestToolOverlay:G,requestTool:H,form:V,btnCross:A},k="_fileUploadHolder_15a4g_1",F="_fileUploadInput_15a4g_5",K="_iconPreview_15a4g_10",h={fileUploadHolder:k,fileUploadInput:F,iconPreview:K};function L({icon:c,onChange:g}){return s.jsxs("div",{children:[s.jsx("label",{htmlFor:"icon",className:"custom-file-label",children:"Upload icon (PNG or SVG)"}),s.jsxs("div",{className:h.fileUploadHolder,children:[s.jsx("input",{type:"file",id:"icon",name:"icon",accept:"image/png, image/svg+xml",className:h.fileUploadInput,onChange:g}),c&&s.jsx("div",{className:h.iconPreview,children:s.jsx("img",{src:c,alt:"Preview",style:{width:"48px",height:"48px"}})})]})]})}function $(){return s.jsx("div",{className:"success-message",children:"âœ… Tool request sent successfully!"})}function Q({onClose:c,isMobileMenuOpen:g}){const x={name:"",categories:[],description:"",icon:""},[v,f]=r.useState(""),[a,i]=r.useState(x),[_,T]=r.useState(!1),[C,w]=r.useState(!1),[l,u]=r.useState({name:!1,categories:!1,description:!1}),[p,d]=r.useState({name:!1,categories:!1,description:!1});r.useEffect(()=>(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",document.body.style.touchAction="none",()=>{g||(document.body.style.overflow="",document.documentElement.style.overflow="",document.body.style.touchAction="")}),[g]);const j=t=>{const e=t.target.value;i(o=>({...o,name:e})),l.name&&d(o=>({...o,name:e.trim()===""}))},q=t=>{const e=t.target.value,o=e.split(";").filter(Boolean);a.categories.length+o.length>5||!o.every(U=>U.length<=20)||f(e)},S=t=>{if(t.key==="Enter"){t.preventDefault();const e=v.split(";").map(n=>n.trim()).filter(n=>n&&n.length<=20),o=[...a.categories,...e].slice(0,5);i(n=>({...n,categories:o})),f(""),l.categories&&d(n=>({...n,categories:o.length===0}))}},b=t=>{i(e=>({...e,categories:e.categories.filter((o,n)=>n!==t)}))},N=t=>{const e=t.target.value;e.length<=420&&(i(o=>({...o,description:e})),l.description&&d(o=>({...o,description:e.trim()===""})))},I=t=>{const e=t.target.files[0];if(!e)return;if(!["image/png","image/svg+xml"].includes(e.type)){alert("Only PNG and SVG files are allowed.");return}const n=new FileReader;n.onloadend=()=>{i(y=>({...y,icon:n.result}))},n.readAsDataURL(e)},R=t=>{t.preventDefault();const e={name:a.name.trim()==="",categories:a.categories.length===0,description:a.description.trim()===""};d(e),u({name:!0,categories:!0,description:!0}),!Object.values(e).some(Boolean)&&(T(!0),w(!1),setTimeout(()=>{T(!1),w(!0),i(x),f(""),u({name:!1,categories:!1,description:!1}),d({name:!1,categories:!1,description:!1})},1500))};return s.jsx("div",{className:m.requestToolContainer,children:s.jsx("div",{className:m.requestToolOverlay,children:s.jsxs("div",{className:m.requestTool,children:[s.jsx("button",{className:`btn ${m.btnCross}`,onClick:c,children:s.jsx(D,{size:20})}),s.jsx("h2",{children:"Request tool"}),s.jsxs("form",{onSubmit:R,className:m.form,children:[s.jsx(E,{value:a.name,onChange:j,error:p.name,touched:l.name,onBlur:()=>u(t=>({...t,name:!0}))}),s.jsx(P,{tagsInput:v,onChange:q,onKeyDown:S,categories:a.categories,onRemove:b,error:p.categories,touched:l.categories,onBlur:()=>u(t=>({...t,categories:!0}))}),s.jsx(B,{value:a.description,onChange:N,maxLength:420,error:p.description,touched:l.description,onBlur:()=>u(t=>({...t,description:!0}))}),s.jsx(L,{icon:a.icon,onChange:I}),s.jsx(M,{onCancel:c,isSending:_})]}),C&&s.jsx($,{})]})})})}export{Q as default};
//# sourceMappingURL=RequestTool-BdMztkuK.js.map
